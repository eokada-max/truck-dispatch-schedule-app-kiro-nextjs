# バージョン管理ガイドライン

## 概要

このアプリケーションでは、セマンティックバージョニング（Semantic Versioning）を採用しています。

## バージョン番号の形式

```
v{Major}.{Minor}.{Patch}
例: v1.2.0
```

## バージョニングルール

### Major変更（X.0.0）
**GitHubへのpush時に繰り上げ**

- 大きな機能追加や破壊的変更
- アーキテクチャの大幅な変更
- データベーススキーマの変更

例：
- v1.0.0 → v2.0.0（GitHubにpush）

### Minor変更（1.X.0）
**機能追加や重要な修正**

- 新機能の追加
- 既存機能の大幅な改善
- パフォーマンスの大幅な向上

例：
- v1.1.0 → v1.2.0（楽観的UI更新の実装）
- v1.2.0 → v1.3.0（新しいレポート機能の追加）

### Patch変更（1.0.X）
**バグ修正や小さな調整**

- バグ修正
- UIの微調整
- ドキュメントの更新
- 小さなパフォーマンス改善

例：
- v1.2.0 → v1.2.1（ボタンの配置修正）
- v1.2.1 → v1.2.2（エラーメッセージの修正）

## バージョン更新手順

### 1. `lib/version.ts`を更新

```typescript
export const APP_VERSION = {
  major: 1,
  minor: 2,  // ← ここを更新
  patch: 0,
} as const;

export const CHANGELOG = [
  {
    version: '1.2.0',  // ← 新しいバージョン
    date: '2025-01-15',  // ← 日付を更新
    type: 'minor' as const,
    changes: [
      '新機能の説明',
      '修正内容の説明',
    ],
  },
  // 以前のバージョン...
];
```

### 2. `package.json`を更新

```json
{
  "version": "1.2.0"  // ← lib/version.tsと同じバージョンに更新
}
```

### 3. GitHubにpush（Major変更の場合）

```bash
git add .
git commit -m "chore: bump version to v2.0.0"
git push origin main
```

## 変更履歴の記載ルール

### 良い例

```typescript
changes: [
  'スマホでの範囲選択を無効化（タップで1時間枠の新規作成のみ）',
  '楽観的UI更新の実装（ドラッグ&ドロップの即座反映）',
  'リアルタイム同期の競合修正',
]
```

### 悪い例

```typescript
changes: [
  'バグ修正',  // ← 何を修正したか不明
  '改善',  // ← 何を改善したか不明
  'コード整理',  // ← ユーザーに関係ない
]
```

## 表示場所

### ナビゲーションバー（PC）
```
配送スケジュール管理
v1.2.0 - スマホでの範囲選択を無効化、楽観的UI更新の実装、リアルタイム同期の競合修正
```

### ナビゲーションバー（スマホ）
```
配送管理
v1.2.0
```

## 現在のバージョン

**v1.2.0**

### 変更内容
- スマホでの範囲選択を無効化（タップで1時間枠の新規作成のみ）
- 楽観的UI更新の実装（ドラッグ&ドロップの即座反映）
- リアルタイム同期の競合修正

## バージョン履歴

### v1.2.0（2025-01-XX）- Minor
- スマホでの範囲選択を無効化
- 楽観的UI更新の実装
- リアルタイム同期の競合修正

### v1.1.0（2025-01-XX）- Minor
- ドラッグ&ドロップ機能の実装
- 時間範囲選択機能の追加
- リサイズ対応
- リアルタイム同期機能の追加

### v1.0.0（2025-01-XX）- Major
- 初回リリース
- スケジュール管理機能
- クライアント管理機能
- ドライバー管理機能

## 注意事項

1. **バージョン番号の一貫性**: `lib/version.ts`と`package.json`のバージョンは常に一致させる
2. **変更履歴の記載**: ユーザーに分かりやすい言葉で記載する
3. **日付の更新**: リリース時に必ず日付を更新する
4. **GitHubへのpush**: Major変更の場合は必ずpushする

## 自動化（将来の改善案）

- GitHubへのpush時に自動的にMajorバージョンを繰り上げるGitHub Actionsの導入
- CHANGELOGの自動生成
- バージョンタグの自動作成
